AIFV v0 Lock Spec

Status: LOCKED
Applies to: AIFX Desktop v0
Verification Tier: SDA (Self-Declared Authorship only)

⸻

1. Purpose

AIFV defines a provenance-first, integrity-verifiable container format for AI-generated video.

AIFV v0 is intentionally minimal:
	•	It packages video
	•	It verifies integrity and declared authorship
	•	It does not transcode, watermark, distribute, or assert identity

AIFV is a truth container, not a delivery format.

⸻

2. Scope (v0)

Included
	•	Deterministic packaging
	•	Provenance declaration
	•	Integrity hashing
	•	Local validation
	•	Desktop tooling support

Explicitly Out of Scope
	•	Identity verification (VC / PVA)
	•	DRM or watermarking
	•	Mandatory transcoding
	•	Network access or remote assets
	•	Policy enforcement beyond structural validity

⸻

3. Container Format

File Extension
.aifv

Container Type
	•	ZIP-like archive
	•	Deterministic file ordering
	•	No compression requirements enforced in v0

/manifest.json
/declaration.txt
/hashes.json
/assets/
  ├─ video.<ext>
  └─ thumb.jpg

Structural Rules
	•	Exactly one primary video asset
	•	Primary video must match: assets/video.*
	•	Exactly one thumbnail named: assets/thumb.jpg
	•	No additional files or folders allowed in v0

Any deviation → FAIL

⸻

5. Manifest Requirements

Required Top-Level Fields

{
  "format": "AIFV",
  "version": "0.x",
  "ai_generated": true,
  "mode": "<string>",
  "creator": {
    "name": "<string>",
    "contact": "<string>"
  },
  "verification": {
    "tier": "SDA"
  },
  "assets": {
    "primary": {
      "path": "assets/video.<ext>"
    },
    "thumbnail": {
      "path": "assets/thumb.jpg"
    }
  },
  "media": { }
}


Rules
	•	creator.name is required
	•	creator.contact is required (email minimum)
	•	verification.tier must be SDA (auto-set by converter)
	•	All asset paths must be:
	•	relative
	•	normalized
	•	inside the container
	•	free of .., absolute paths, or protocol strings

⸻

6. Declaration

File
/declaration.txt

Rules
	•	Declaration text is required
	•	Manifest must reference it:

"declaration": {
  "path": "declaration.txt"
}

	•	Declaration is human-readable, plain text
	•	Declaration content is not interpreted or executed

⸻

7. Hashing & Integrity

Hash Authority
	•	hashes.json is the single source of truth
	•	Manifest does not embed hashes in v0

Required Hashed Items
	•	manifest.json
	•	declaration.txt
	•	assets/video.<ext>
	•	assets/thumb.jpg

Hash Rules
	•	Binary hashing only
	•	Deterministic chunking
	•	Stable ordering
	•	Hash mismatch → FAIL
	•	Missing hash → FAIL

⸻

8. Media Facts (Adapter → Core)

Video facts are observed, never modified.

Required Facts

"media": {
  "duration_ms": <int>,
  "width": <int>,
  "height": <int>,
  "fps_num": <int>,
  "fps_den": <int>,
  "container": "<string>",
  "video_codec": "<string>"
}

Optional Facts (Non-Blocking)
	•	has_audio (boolean)
	•	audio_codec
	•	audio_sample_rate
	•	audio_channels

Rules
	•	Facts are informational in v0
	•	No codec or resolution policy enforcement in v0

⸻

9. Thumbnail Requirements
	•	File name: assets/thumb.jpg
	•	Format: JPEG only
	•	Must decode successfully
	•	Must be hashed and verified
	•	Generated by converter (typically via ffmpeg)

Thumbnail is mandatory in v0.

⸻

10. Validation Rules (Core)

Validator MUST:
	1.	Enforce exact container structure
	2.	Enforce all required manifest fields
	3.	Verify hashes against computed values
	4.	Ensure exactly one primary video
	5.	Ensure thumbnail exists and is valid
	6.	Reject unsafe paths
	7.	Reject symlinks
	8.	Reject remote references
	9.	Produce deterministic PASS/FAIL with explicit reasons

⸻

11. Security Rules (Inherited from AIFM)

AIFV inherits all AIFM safety guarantees:
	•	Zip-slip / path traversal prevention
	•	Absolute path rejection
	•	Symlink rejection
	•	No file overwrite outside extraction root
	•	No executable behavior from manifests or declarations

Any violation → FAIL

⸻

12. Converter Stance (v0)

Converter responsibilities:
	•	Package existing video
	•	Generate thumbnail
	•	Extract media facts
	•	Write manifest, declaration, hashes
	•	Produce .aifv

Converter MUST NOT:
	•	Transcode primary video
	•	Modify video bytes
	•	Access network resources

Unreadable input → converter error (not validator error)

⸻

13. Desktop UX Expectations

AIFX Converter + Verifier
	•	Supports AIFV creation
	•	Supports AIFV validation
	•	No genre, language, or cultural metadata

AIFX Player (future)
	•	Playback
	•	Manifest inspection
	•	Verification status display

⸻

14. Versioning & Forward Compatibility
	•	AIFV v0 is immutable once released
	•	Future versions may:
	•	Add optional fields
	•	Add transcoding modes
	•	Introduce VC / PVA tiers
	•	v0 packages must remain verifiable forever

⸻

15. Design Principle (Final)

AIFV does not prove who you are.
It proves what you claimed, when you claimed it, and that nothing changed afterward.

That is the contract.

⸻

END OF AIFV v0 LOCK SPEC
